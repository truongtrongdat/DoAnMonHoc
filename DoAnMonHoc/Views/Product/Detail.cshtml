@model DoAnMonHoc.ViewModel.ChiTietSanPhamVM
<head>
	<title>EShopper - Bootstrap Shop Template</title>
	<style>
		.carousel-inner img {
			height: 400px;
			object-fit: cover;
		}
	</style>
</head>
<body data-spy="scroll" data-target=".navbar" data-offset="51">
	<!-- Page Header Start -->
	<div class="container-fluid bg-secondary mb-5">
		<div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 300px">
			<h1 class="font-weight-semi-bold text-uppercase mb-3">Shop Detail</h1>
			<div class="d-inline-flex">
				<p class="m-0"><a href="">Home</a></p>
				<p class="m-0 px-2">-</p>
				<p class="m-0">Shop Detail</p>
			</div>
		</div>
	</div>
	<!-- Page Header End -->
	<!-- Shop Detail Start -->
	<div class="container-fluid py-5">
		<div class="row px-xl-5">
			<div class="col-lg-5 pb-5">
				<div id="product-carousel" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner border">
						@if (Model.HinhAnhChiTiet != null && Model.HinhAnhChiTiet.Count > 0)
						{
							@foreach (var item in Model.HinhAnhChiTiet)
							{
								var isActive = (item == Model.HinhAnhChiTiet.First()) ? "active" : "";
								<div class="carousel-item @isActive">
									<img class="w-100 h-100" src="~/img/danhmuc/@item.Url" alt="@Model.TenSanPham">
								</div>
							}
						}
						else
						{
							<div class="carousel-item active">
								<img class="w-100 h-100" src="~/img/danhmuc/@Model.Hinh" alt="@Model.TenSanPham">
							</div>
						}
					</div>
					<a class="carousel-control-prev" href="#product-carousel" data-slide="prev">
						<i class="fa fa-2x fa-angle-left text-dark"></i>
					</a>
					<a class="carousel-control-next" href="#product-carousel" data-slide="next">
						<i class="fa fa-2x fa-angle-right text-dark"></i>
					</a>
				</div>
			</div>

			<div class="col-lg-7 pb-5">
				<h3 class="font-weight-semi-bold">@Model.TenSanPham</h3>
				<div class="d-flex mb-3">
					<div class="text-primary mr-2">
						<small class="fas fa-star"></small>
						<small class="fas fa-star"></small>
						<small class="fas fa-star"></small>
						<small class="fas fa-star-half-alt"></small>
						<small class="far fa-star"></small>
					</div>
					<small class="pt-1">(@Model.comments.Count() Reviews)</small>
				</div>
				<h3 class="font-weight-semi-bold mb-4">@Model.DonGia VNĐ</h3>
				<p class="mb-4">Đây là sản phẩm cao cấp được thiết kế rất tỉ mỉ và rất chỉnh chu từ các nhà thiết kế chuyên nghiệp , nổi tiếng.</p>
				<div class="d-flex mb-3">
					<p class="text-dark font-weight-medium mb-0 mr-3">Sizes:</p>
					<form>
						<div class="custom-control custom-radio custom-control-inline">
							<input type="radio" class="custom-control-input" id="size-1" name="size">
							<label class="custom-control-label" for="size-1">XS</label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input type="radio" class="custom-control-input" id="size-2" name="size">
							<label class="custom-control-label" for="size-2">S</label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input type="radio" class="custom-control-input" id="size-3" name="size">
							<label class="custom-control-label" for="size-3">M</label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input type="radio" class="custom-control-input" id="size-4" name="size">
							<label class="custom-control-label" for="size-4">L</label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input type="radio" class="custom-control-input" id="size-5" name="size">
							<label class="custom-control-label" for="size-5">XL</label>
						</div>
					</form>
				</div>
				<div class="d-flex mb-4">
					<p class="text-dark font-weight-medium mb-0 mr-3">Loại:</p>
					<div class="mr-3">@Model.TenDanhMuc</div>
				</div>
				<div class="d-flex mb-4">
					<p class="text-dark font-weight-medium mb-0 mr-3">Ngày sản xuất:</p>
					<div class="mr-3">@Model.NgaySanXuat</div>
				</div>
				<div class="d-flex mb-4">
					<p class="text-dark font-weight-medium mb-0 mr-3">Số lượt xem:</p>
					<div class="mr-3">@Model.soLuongXem</div>
				</div>
				<div class="d-flex mb-4">
					<p class="text-dark font-weight-medium mb-0 mr-3">Số lượt mua:</p>
					<div>@Model.soLuongMua</div>
				</div>
				<form asp-action="ThemVaoGioHang" asp-controller="Cart" asp-route-maSP="@Model.MaSanPham">
					<div class="d-flex align-items-center mb-4 pt-2">
						<div class="input-group quantity mr-3" style="width: 130px;">
							<div class="input-group-btn">
								<button class="btn btn-primary btn-minus" type="button">
									<i class="fa fa-minus"></i>
								</button>
							</div>
							<input type="text" class="form-control bg-secondary text-center" value="1" name="soLuongMua">
							<div class="input-group-btn">
								<button class="btn btn-primary btn-plus" type="button">
									<i class="fa fa-plus"></i>
								</button>
							</div>
						</div>
						<button class="btn btn-primary px-3"><i class="fa fa-shopping-cart mr-1"></i>Thêm vào giỏ hàng</button>
					</div>
				</form>
				<div class="d-flex pt-2">
					<p class="text-dark font-weight-medium mb-0 mr-2">Share on:</p>
					<div class="d-inline-flex">
						<a class="text-dark px-2" href="">
							<i class="fab fa-facebook-f"></i>
						</a>
						<a class="text-dark px-2" href="">
							<i class="fab fa-twitter"></i>
						</a>
						<a class="text-dark px-2" href="">
							<i class="fab fa-linkedin-in"></i>
						</a>
						<a class="text-dark px-2" href="">
							<i class="fab fa-pinterest"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
		<div class="row px-xl-5">
			<div class="col">
				<div class="nav nav-tabs justify-content-center border-secondary mb-4">
					<a class="nav-item nav-link active" data-toggle="tab" href="#tab-pane-1">Mô Tả</a>
					<a class="nav-item nav-link" data-toggle="tab" href="#tab-pane-3">Đánh giá</a>
				</div>
				<div class="tab-content">
					<div class="tab-pane fade show active" id="tab-pane-1">
						<h4 class="mb-3">Mô tả sản phẩm</h4>
						<p>@Model.MoTa</p>
					</div>
					<div class="tab-pane fade" id="tab-pane-3">
						<div class="row">
							<div class="col-md-6">
								<!--show comments user start-->
								@await Html.PartialAsync("_DanhSachBinhLuan")
								<!--show comments user end-->
							</div>
							<div class="col-md-6">
								<h4 class="mb-4">Để lại đánh giá</h4>
								<small>Các trường bắt buộc được đánh dấu *</small>
								<div class="d-flex my-3">
									<p class="mb-0 mr-2">Your Rating * :</p>
									<div class="text-primary" id="ratingStars">
										<i class="far fa-star" data-value="1"></i>
										<i class="far fa-star" data-value="2"></i>
										<i class="far fa-star" data-value="3"></i>
										<i class="far fa-star" data-value="4"></i>
										<i class="far fa-star" data-value="5"></i>
									</div>
								</div>
								<input type="hidden" name="LuotSaoDanhGia" id="luotSaoDanhGia" value="0">
								<form id="ratingForm" asp-action="RatingProduct" asp-controller="Product" asp-route-maSP="@Model.MaSanPham">
									<div class="form-group">
										<label for="message">Nội dung *</label>
										<textarea name="NoiDung" id="noiDung" cols="30" rows="5" class="form-control" required></textarea>
									</div>
									<input type="hidden" name="LuotSaoDanhGia" id="luotSaoDanhGiaHidden" value="0">
									<div class="form-group mb-0">
										<input type="submit" value="Để lại đánh giá của bạn" class="btn btn-primary px-3">
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
@await Html.PartialAsync("_ThayDoiSoLuongSanPham")
<script>
	document.querySelectorAll('#ratingStars i').forEach(star => {
		star.addEventListener('click', function () {
			const value = parseInt(this.getAttribute('data-value'));
			document.getElementById('luotSaoDanhGiaHidden').value = value;
			// Xóa tất cả các class 'fas' và 'far' khỏi các biểu tượng sao
			document.querySelectorAll('#ratingStars i').forEach(star => {
				star.classList.remove('fas', 'far');
			});
			// Thêm class 'fas' cho các biểu tượng sao được chọn
			for (let i = 1; i <= value; i++) {
				document.querySelector(`#ratingStars i:nth-child(${i})`).classList.add('fas');
			}
			// Thêm class 'far' cho các biểu tượng sao chưa được chọn
			for (let i = value + 1; i <= 5; i++) {
				document.querySelector(`#ratingStars i:nth-child(${i})`).classList.add('far');
			}
		});
	});
</script>
